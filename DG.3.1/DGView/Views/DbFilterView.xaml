<UserControl x:Class="DGView.Views.DbFilterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:DGView.Views"
             xmlns:common="clr-namespace:DGView.Common"
             xmlns:controls="clr-namespace:DGView.Controls"
             Margin="0" Padding="0" UseLayoutRounding="True">

    <UserControl.Resources>
        <Geometry x:Key="ExecuteGeometry">M7,2H17L13.5,9H17L10,22V14H7V2M9,4V12H12V14.66L14,11H10.24L13.76,4H9Z</Geometry>
        <Geometry x:Key="ClearFilterGeometry">M14.73,20.83L17.58,18L14.73,15.17L16.15,13.76L19,16.57L21.8,13.76L23.22,15.17L20.41,18L23.22,20.83L21.8,22.24L19,19.4L16.15,22.24L14.73,20.83M13,19.88C13.04,20.18 12.94,20.5 12.71,20.71C12.32,21.1 11.69,21.1 11.3,20.71L7.29,16.7C7.06,16.47 6.96,16.16 7,15.87V10.75L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L13,10.75V19.88M5.04,5L9,10.06V15.58L11,17.58V10.05L14.96,5H5.04Z</Geometry>
        <Geometry x:Key="OpenIconGeometry">M12,10L8,14H11V20H13V14H16M19,4H5C3.89,4 3,4.9 3,6V18A2,2 0 0,0 5,20H9V18H5V8H19V18H15V20H19A2,2 0 0,0 21,18V6A2,2 0 0,0 19,4Z</Geometry>
    </UserControl.Resources>

    <Grid Margin="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0" Height="30" ClipToBounds="True">

            <ToolBar ToolBarTray.IsLocked="True" ToolBar.OverflowMode="Never" Background="{StaticResource Mwi.WindowBar.BackgroundBrush}"
                 Padding="0" VerticalAlignment="Stretch" Foreground="{StaticResource Mwi.WindowBar.ForegroundBrush}">

                <Button Click="LoadData_OnClick" VerticalAlignment="Stretch" Padding="0" Visibility="{Binding Path=ApplyAction, Converter={x:Static common:VisibilityConverter.Instance}}">
                    <StackPanel Orientation="Horizontal">
                        <Path Data="{StaticResource ExecuteGeometry}" Fill="{StaticResource Mwi.WindowBar.ForegroundBrush}"/>
                        <TextBlock Text="Завантажити дані" Foreground="{StaticResource Mwi.WindowBar.ForegroundBrush}" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <ToggleButton x:Name="OpenSettingSplitButton" Padding="5 0" Margin="4 -1 4 -2" Focusable="False"
                        Style="{StaticResource SplitButtonStyle}"
                        Click="OpenSettingForm_OnClick" Checked="OpenSettingButton_OnChecked">
                    <Path Data="{StaticResource OpenIconGeometry}" Fill="{StaticResource Mwi.WindowBar.ForegroundBrush}"/>
                    <ToggleButton.Resources>
                        <ContextMenu x:Key="Items" StaysOpen="False" Placement="Bottom" LayoutTransform="{StaticResource ScaleTransform}"/>
                    </ToggleButton.Resources>
                </ToggleButton>

                <!--<Button x:Name="xOpenSettingSplitButton" VerticalAlignment="Stretch" Padding="0" VerticalContentAlignment="Stretch" Margin="4 0"
                        Focusable="False">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ElementName=OpenSettingToggleButton, Path=IsChecked}" Value="True">
                                    <Setter Property="Background" Value="{StaticResource Mwi.WindowBar.BackgroundBrush}"/>
                                    <Setter Property="BorderBrush" Value="{StaticResource Mwi.WindowBar.ForegroundBrush}"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                    <Button.Content>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Button Grid.Column="0" Margin="0" BorderThickness="0 0 1 0" Padding="5 0 3 0"
                                    Click="OpenSettingForm_OnClick"
                                    VerticalAlignment="Stretch" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
                                <Path Data="{StaticResource OpenIconGeometry}" Fill="{StaticResource Mwi.WindowBar.ForegroundBrush}"/>
                            </Button>

                            <Grid Grid.Column="1">
                                <ToggleButton x:Name="OpenSettingToggleButton" Foreground="{StaticResource Mwi.WindowBar.ForegroundBrush}" BorderThickness="1 0 0 0" Padding="0" Margin="-1 0 0 0"
                                              IsThreeState="False"
                                              Checked="OpenSettingButton_OnChecked"
                                              controls:DualPathToggleButtonEffect.GeometryOff="{StaticResource Mwi.Container.WindowMenuNormalGeometry}"
                                              controls:DualPathToggleButtonEffect.GeometryOn="{StaticResource Mwi.Container.WindowMenuOpenGeometry}"
                                              controls:DualPathToggleButtonEffect.MarginOff="3.5 7"
                                              controls:DualPathToggleButtonEffect.MarginOn="3.5 7">
                                    <ToggleButton.Style>
                                        <Style TargetType="ToggleButton" BasedOn="{StaticResource {x:Static ToolBar.ToggleButtonStyleKey}}">
                                            <Style.Triggers>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsMouseOver" Value="False" />
                                                        <Condition Property="IsChecked" Value="True" />
                                                    </MultiTrigger.Conditions>
                                                    <MultiTrigger.Setters>
                                                        <Setter Property="BorderBrush" Value="{StaticResource Mwi.WindowBar.ForegroundBrush}"/>
                                                        <Setter Property="Background" Value="Transparent"/>
                                                    </MultiTrigger.Setters>
                                                </MultiTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ToggleButton.Style>
                                    <ToggleButton.Resources>
                                        <ContextMenu x:Key="Items" StaysOpen="False" Placement="Bottom" LayoutTransform="{StaticResource ScaleTransform}"/>
                                    </ToggleButton.Resources>
                                </ToggleButton>
                            </Grid>
                        </Grid>
                    </Button.Content>
                </Button>-->

                <Button VerticalAlignment="Stretch" Click="ClearFilter_OnClick" Padding="0">
                    <StackPanel Orientation="Horizontal">
                        <Path Data="{StaticResource ClearFilterGeometry}" Fill="{StaticResource Mwi.WindowBar.ForegroundBrush}"/>
                        <TextBlock Text="Очистити фільтр" Foreground="{StaticResource Mwi.WindowBar.ForegroundBrush}" VerticalAlignment="Center" Margin="4 0 2 0"/>
                    </StackPanel>
                </Button>
            </ToolBar>
        </Grid>

        <local:FilterGrid Grid.Row="1" x:Name="FilterGrid"/>
    </Grid>
</UserControl>
